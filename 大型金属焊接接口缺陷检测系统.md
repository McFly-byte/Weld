大型金属焊接接口缺陷检测系统

# TODO

- [x] 缺陷检测算法 
  - [ ] 基本已经搞定了，后面有时间再优化（weight0）

- [ ] usb验证算法

  > 先跳过

- [ ] qt界面
  - [x] 大widget套小widget，小的切换大的不动

    > 弃用

  - [x] 组件布局（看sptr找灵感）

  - [ ] 各元素样式（浏览各组件功能，选用）

  - [ ] 按钮连接

    - [ ] 点击按钮切换界面样式（开始、暂停|结束）
    - [ ] 打开/存储文件

  - [ ] 提示框

  - [ ] 数据库连接、存储（检测条目信息（批次/逐条））

  - [ ] ui界面操作从数据库导出excel

  - [ ] 显示word文档（技术支持）

- [ ] 多线程（授权检测要一直开）

# 计划书要求

## 授权管理
### 查看
弹出对话框，显示（授权使用企业、有效期、状态、编号、版本）
简单版：硬编码
复杂版：搞一个数据库
### 插入密匙
识别usb
搞不定就换成注册/登陆

### 验证密匙
插入后：不管什么界面都自动验证
按钮手动验证
成功弹窗“授权有效”
失败弹窗“授权失败”，且禁用系统
失效弹窗”授权失效”，且暂停（要保存状态，看完下面的步骤才知道怎么处理
拔出弹窗“授权密钥已拔出”，其他和失效弹窗一样
## 图像采集
其实不用管，做成用户上传图像集就行
## 数据处理
预处理
特征提取
缺陷识别：（这三个就用别人的）
**结果展示**：检测编号（用户输入）、缺陷类型（回头规定几种）、位置（左上坐标）、大小（长宽）
开始弹窗：用户输入批次、图像集
暂停：得搜
结束：结束并清空
更换批次：暂停时发送确认弹窗；已结束则直接开始弹窗
批次报告：批次报告弹窗（可以保存文件）

## 历史数据
条目：批次、检测结果、生产日期、操作员（用户名）
参看（统计图表没必要，至少不必上来就搞）
导出为excel

## 基础参数
检测阈值（？
识别精度：准备3套参数，实现3种不同的精度
关于显示的一系列参数
## 技术支持
最简单的一个
### 使用手册
复杂版：文件读取、显示
简单版：新开一页面
### 联系方式
新开一页面，展示字符串
# 系统设计

授权管理、缺陷检测、历史数据、技术支持
打开后显示缺陷检测界面

主界面

## 授权管理

不另写界面，只在菜单栏下方多一行，放两个按钮：授权密钥查看、授权密钥验证

按钮-密钥查看：弹窗-密钥查看

弹窗-密钥查看：授权使用企业、授权有效期、授权状态、授权编号、授权版本

按钮-授权密钥验证：弹窗-等待插入密钥

弹窗-等待插入密钥：弹窗-密钥已插入 or 弹窗-等待已超时

弹窗-密钥已插入：插入后自动弹出，直到成功、失败or超时

弹窗-失效：

弹窗-成功：

弹窗-等待已超时：

弹窗-密钥已拔出：

## 缺陷检测

需要输入：生产批次号、负责人、图像路径、各种参数、

自动生成：计划检测数、开始时间

> 计划检测数+开始时间 即为数据库key

## 历史数据

| 序号 | 生产批次号 | 负责人 | 计划检测数 | 开始时间 | 结束时间 | 合格数量 | 缺陷数量 | 综合缺陷率 | 操作        |
| ---- | ---------- | ------ | ---------- | -------- | -------- | -------- | -------- | ---------- | ----------- |
| 1    |            |        |            |          |          |          |          |            | <u>查看</u> |
| 2    |            |        |            |          |          |          |          |            |             |
| 3    |            |        |            |          |          |          |          |            |             |

| 序号 | 生产批次号 | 负责人 | 检测时间 | 合格   |
| ---- | ---------- | ------ | -------- | ------ |
|      |            |        |          |        |
|      |            |        |          | 不合格 |
|      |            |        |          |        |

按钮-查看：新界面看数据

按钮-导出：保存文件到路径

> 待定按钮：查询搜索

## 技术支持

使用手册：点击打开新页面，显示文件

联系方式：点击打开新页面

# for博客

- [ ] yolov7运行
- [ ] pyqt各种
- [ ] detect.py封装
- [ ] 多线程解决耗时线程
- [ ] 回调